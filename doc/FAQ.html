<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<head>
	<title>APC Toolkit Action Aplications - Developers FAQ</title>
  <link rel=stylesheet type="text/css" href="devnotes.css">
</head>
<body>
<a href="index.html">Other documentation</a><br>
<hr><br>
<a href="#newaa">How to create new Action Aplication</a><br><br>
<a href="#anonymous">How to create form for anonymous posting from public website?</a><br><br>
<a href="#aalanguage">How to create aa in alternate language?</a><br><br>
<a href="#aaslices">What are the 'Action Aplication Core' and 'News (EN) Template' slices?</a><br><br>
<a href="#feeding">How works the internal feeding?</a><br><br>
<a href="#aliases">How to create new alias function?</a><br><br>
<a href="#parent">How to link parent item?</a><br><br>
<a href="#constant">How the 'Display' and the 'Store in Database' parts of the category/constant is supposed to be used?</a><br><br>
<a href="#category">What is the parent category?</a><br><br>
<a href="#search">How to setup searchform?</a><br><br>
<a href="#alias">What is the Prameters in Alias Function definition</a><br><br>
<a href="#javascript">What does it means the "JavaScript item exchange" View?</a><br><br>
<a href="#sliceparam">Which parameters can I use with slice.php3</a><br><br>
<a href="#"></a>
<a href="#"></a>
<a href="#"></a>




<a name="newaa"></a>
<h3>How to create new Action Aplication</h3>
<p>   The applications in v1.5+ should be created quite easy.<br>
<ol>
  <li>Chose one slice and create the set of fields you want to have in new application.<br>
    <br>
  </li>
  <li>Change for this fields the default values, help texts, names, priorities, 
    aliases, etc. in admin interface (<font color="#663333">"Admin" -> "Main settings 
    - Fields"</font>).<br>
    <br>
  </li>
  <li>Change the design of fulltext view, list item view and possibly the admin 
    view (<font color="#663333">"Admin" -> "Design - Fulltext"</font>, <font color="#663333">"Admin" 
    -> "Design - Index"</font>, <font color="#663333">"Admin" -> "Design - Item 
    Manager"</font>)<br>
    <br>
  </li>
  <li>Test this new slice, if it is working well<br>
    <br>
  </li>
  <li>Add new slice based on this one (not template, but slice)<br>
    <br>
  </li>
  <li>Mark the new slice as Template (<font color="#663333">"Admin" -> "Main settings 
    - Slice"</font>) - for that you must be superadministrator (four stars).<br>
  </li>
  <br>
</ol>


<a name="anonymous"></a>
<h3>How to create form for anonymous posting from public website?</h3>
<ol>
  <li><b>Enable anonymous posting</b><br>
    <br>
    First thing you have to do is to permit anonymous posting from web. This can 
    be done on <font color="#663333">"Admin" -> "Main settings - Slice"</font> 
    page where is the option <font color="#663333">"Allow anonymous posting of 
    items"</font>. There you should select to what bin the anonymous posted items 
    should go ("<i>Active</i>" and "<i>Holding bin</i>" are the possibilities).<br>
    <br>
  </li>
  <li><b>Create form</b><br>
    <br>
    The easiest way how to create input form is to display standard input form 
    from admin interface (<font color="#663333">"Add item"</font>). Then you should 
    view source code for displayed page and copy the code, which is between &lt;form 
    ...&gt; and &lt;/form&gt; tags inside HTML code for new public page (newitem.html 
    for example). <br>
    <br>
    In the form you can make as many chages you want, but one change is realy 
    needed. There should be changed the url of script, where the form is posted 
    to <b>filler.php3</b>:<br>
    <br>
    Change it from<br>
    <br>
    <code>&lt;form enctype='multipart/form-data' method=post action='/apc-aa/admin/itemedit.php3?AA_CP_Session=2bbb85e9205239910a222b4c59cee2fa'></code><br>
    <br>
    to<br>
    <br>
    <code>&lt;form enctype="multipart/form-data" method=post action='/apc-aa/filler.php3'></code><br>
    <br>
    That is all what you need. In next paragraph are just tips and tricks for 
    better customization.<br>
    <br>
    <b>Tips &amp; Tricks</b><br>
    <ul>
      <li>You can delete all the fields from form, but <b>slice_id</b>. The slice_id 
        should allways remain.<br>
        <br>
      </li>
      <li>The inputs are <b>validated</b> as if it was typed in standard itemedit.php3 
        form. If there are some invalid data, whole item is admitted. It is very 
        good idea to add your own javascript validatoin of form before it is send 
        to filler.php3 script.<br>
        <br>
      </li>
      <li>You can disable the standard AA validation by adding hidden field <b>notvalidate</b> 
        in the form:<br>
        <code>&lt;input type=hidden name='notvalidate' value='1'&gt;</code> <br>
        <br>
      </li>
      <li>The page, which appears if the item is correctly stored to database 
        can be specified in <b>ok_url</b> variable:<br>
        <br>
        <code>&lt;input type=hidden name='ok_url' value='http://www.apc.org/thanks.html'&gt;</code> 
        <br>
        <br>
      </li>
      <li>The page, which appears if the item is not correctly stored to database 
        (due to validation problems, ...), can be specified in <b>err_url</b> 
        variable:<br>
        <br>
        <code>&lt;input type=hidden name='err_url' value='http://www.apc.org/invalid.html'&gt;<br>
        <br>
        </code></li>
      <li>It is possible to set values for not displayed fields just by adding 
        hidden field for such field:<br>
        <br>
        <code>&lt;input type=hidden name='v696d675f6865696768742e2e2e2e2e2e' value='Anonymous 
        author'&gt;</code><br>
        <br>
        Note:<br>
        This solution is easy and good for many cases, but it is by no means secure. 
        Any experienced user can change values of hidden fields so don't relly 
        on such data. Better solution is to completely omit such fields from input 
        form and set the default values for the fields in <font color="#663333">"Admin" 
        -> "Main setting - Fields" -> "Edit" -> "Default"</font>. The values then 
        are set dirrectly from database. This solution is a little bit more secure. 
        <br>
        <br>
      </li>
      <li>It is possible to send <b>images</b> and other <b>files</b> by the form 
        (unlike the anonymous posting in version prior 1.5)</li>
    </ul>
  </li>
</ol>

<a name="aalanguage"></a>
<h3>How to create aa in alternate language?</h3>
<p> If you want to translate ActionApps to other national language, you can look 
  at:</p>
<ul>
  <li> <b>include/en_common_lang.php3</b><br>
    <br>
    - this is the file with language constants definions which is common to all 
    slices in the AA instalation (you can look at cz_common_lang.php3, which is 
    the same file for czech language) <br>
    <br>
  </li>
  <li> <b>include/en_news_lang.php3</b><br>
    <br>
    - this is the file with language constants definions for specific slice. It 
    is possible to have slices in different languages. You can choose the used 
    language on "Admin" -> "Main settings - Slice" page. So if you want to have 
    slice in french, you have to copy en_news_lang.php3 to new file (fr_news_lang.php3 
    for example) and translate the texts to french to fit your needs.<br>
    <br>
  </li>
  <li> texts in template slice <b>News (EN) template</b> (see <a href="#aaslices">Templates</a> 
    section)<br>
    <br>
  </li>
  <li> texts in fields templateslice <b>Action Aplication Core</b> (see <a href="#aaslices">Templates</a> 
    section)</li>
</ul>
<a name="aaslices"></a>
<h3>What are the 'Action Aplication Core' and 'News (EN) Template' slices?</h3>
<i>There are two (and should be more in the future) odd slices in slice listbox. Why?</i>
<p>Both, the '<i>Action Aplication Core</i>' and '<i>News (EN) Template</i>' are 
  visible only to superadmins and both should not have any items.</p>

<p><b>News (EN) Template</b><br>
  <br>
  '<i>News (EN) Template</i>' slice is just template for creating new slices. 
  This template is shown is option in <font color="#663333">"Admin" -> "Add Slice"</font> 
  dialog in templates listbox. If you feel, that the setting for new created slices 
  is not optimal you have two possibilities:<br>

<ul>
  <li>Modify the setting for '<i>News (EN) Template'</i> slice on <font color="#663333">"Admin"</font> 
    pages. The new slices based on modified template will be set-up just like 
    current setting in template slice.<br>
    <br>
  </li>
  <li>Create new application (= template) as described in <a href="#newaa">New 
    Aplication section</a></li>
</ul>
<p></p>
<p><b>Action Aplication Core</b><br>
  <br>
  '<i>Action Aplication Core</i>' slice is another case. In this slice are defined 
  default values for each <b>field type</b>. This values will be used if you will 
  add new field to slice on <font color="#663333">"Admin" -> "Main settins - Field"</font> 
  page. There you should fill field name, priority and field type. After you click 
  update, new field is added o database for the slice and the values (like validate 
  function, alias, help text, ...) is copied from the same field in '<i>Action 
  Aplication Core</i>' slice. It is good idea to translate the help texts in the 
  '<i>Action Aplication Core</i>' slice too, if you are translating whole ActionApps 
  to some other national language. </p>

<a name="feeding"></a>
<h3>How works the internal feeding?</h3>
<p>If you write an item which goes into <i>Active bin</i> or if you approve an 
  item, then the feeding function is invoked. This function finds all slices, 
  where the item should be fed (depending on current feeding permissions (<font color="#663333">"Admin" 
  -> "Content sharing - Import &amp; Export"</font>) and feeding setings (<font color="#663333">"Admin" 
  -> "Content sharing - Filters"</font>)). The feeding goes deep and deep until 
  cycle is detected or feeding into <i>Holding bin</i> is set. </p>
<p>Feeding one item from one slice to another means:<br>
<ul>
  <li>Content of each filed is copied to to new slice (there are one excepion 
    - see <i>STATE_UNFEEDABLE</i> flag in following text)<br>
    <br>
  </li>
  <li>The content is copied including the <i>HTML codded / plain text</i> flag<br>
    <br>
  </li>
  <li>Field is fed to field with the same field_id as default (<i>headline........</i> 
    will go to <i>headline........</i> field). This can be changed in <i>feedmap</i> 
    table, where you can map one field to another (this feature is currently implemented, 
    but there are still not the admin inteface for seting the mapping - the feedmap 
    table is currently empty and you can't change it from admin interface)<br>
    <br>
  </li>
  <li>flag <i>FLAG_FEED</i> are set for each stored value (see <i>FLAG_*</i> definitons 
    in following text)</li>
</ul>
<p></p>

<p>Let's look in constants.php3 file:<br>
  <br>
  <code> # content table flags<br>
  define( "FLAG_HTML", 1 );<br>
  define( "FLAG_FEED", 2 );<br>
  define( "FLAG_FREEZE", 4 );<br>
  define( "FLAG_OFFLINE", 8 );<br>
  <br>
  # states of feed field of field table<br>
  define( "STATE_FEEDABLE", 0 );<br>
  define( "STATE_UNFEEDABLE", 1 );<br>
  define( "STATE_FEEDNOCHANGE", 2 );<br>
  <br>
  # relation table flags<br>
  define( "REL_FLAG_FEED", 2 ); # 2 - just to be compatible with content table<br>
  </code><br>
  <br>
  There we see, the various flags can be set. The most important are the flags 
  for <i>field</i> table. For each field you can set if this field is<br>
<ul>
  <li>feedable (<i>STATE_FEEDABLE</i>) - the content for this field is copied 
    to new slice and user in new slice can freely edit it<br>
    <br>
  </li>
  <li>unfeedable (<i>STATE_UNFEEDABLE</i>) - the content for this field is never 
    copied to the new slice<br>
    <br>
  </li>
  <li>feedable, but locked (<i>STATE_FEEDNOCHANGE</i>) - field is copied to new 
    slice, but the flag <i>FLAG_FREEZE</i> is set for the field, so user in new 
    slice can display the content of this field, but she can't change the value</li>
</ul>
These setting can be done on <font color="#663333">"Admin" -> "Main settings - 
Fields" -> "Edit" -> "Feeding"</font> page.<br>
<br>
Depending on <i>field</i> table flags, the flags for <i>content</i> table are set:<br>
<ul>
  <li><i>FLAG_HTML</i> is allways copied from source field</li>
  <br>
  <br>
  <li><i>FLAG_FEED</i> is ollways set for fed fields (currently it have no specific 
    use - we just marking the fed content<br>
    <br>
  </li>
  <li><i>FLAG_FREEZE</i> is set if source field has <i>STATE_FEEDNOCHANGE</i> 
    flag set. In other cases is this flag unset. All fields with <i>FLAG_FREEZE</i> 
    are never displayed in input form so it can't be changed by user in destination 
    slice.</li>
</ul>
<p></p>
<p>After copying the contents, the relation table is updated. This table holds 
  information about feeding tree (from which item is content fed to another). 
  The ralation table will be used for another purposes in future too (for holding 
  discussion threads, ...), so each record for feeding if flaged as <i>REL_FLAG_FEED</i>.<br>
  <br>
  <b>Note</b>: The information from relation table could be used for <i>content 
  sharing</i> in the future. The <i>content sharing</i> means, that if the content 
  is changed in source slice, it is changed in destination slice too. For that 
  purpose could be new <i>STATE_FEED&amp;UPDATE</i> flag itroduced. After updating 
  the content of such field, the <i>relation</i> table is checked for depending 
  items (= fed items from this item) and the appropriate fields are updated too. 
  (or is there other solution?)</p>
<br><br>

<a name="aliases"></a>
<h3>How to create new alias function?</h3>
<p>   If you find no alias function is good enough for you, you can write your 
own. function. The alias functions are stored in include/item.php3 file and its
names begins with f_ and they are three letters long (just like f_a()).</p>
<p>   All you have to do for new function is:
<ol>
  <li>Write your own function in item.php3 (say f_9()).<br>
    <br>
  </li>
  <li>Add this function to alias function array $ALIAS_FUNC_TYPES 
      in include/constants.php3.<br>
    <br>
  </li>
  <li>Assign name to this function in en_news_lang.php3, cz_news_lang.php3, ...
      (just like define(&quot;L_ALIAS_FUNC_9&quot;, &quot;my_func&quot;); )
<br>
    <br>
  </li>
  <br>
</ol>
<br>

<a name="parent"></a>
<h3>How to link parent item?</h3>

<p>Add<br>
<br>
<code>
&lt;a href="/apc-aa/go.php3?sh_itm=_#ITEM_ID#&amp;type=fed"&gt;fed from&lt;/a&gt;
</code><br><br>
or such link to your index (or fulltext) design (Admin -> Design -> Index -> Odd Rows). This will point to fulltext of parent item or to the fulltext of the same item, if the item is not fed.</p>
<br>

<a name="constant"></a>
<h3>How the 'Display' and the 'Store in Database' parts of the category/constant is supposed to be used?</h3>

<p>Categories are done the same way as other constants are. The table for them looks:

<pre>
<code>
CREATE TABLE constant (
   id char(16) NOT NULL,
   group_id char(16) NOT NULL,
   name char(150) NOT NULL,
   value char(150) NOT NULL,
   class char(16),
   pri smallint(5) DEFAULT '100' NOT NULL,
   PRIMARY KEY (id),
   KEY group_id (group_id)
);
</code></pre>

<p>Constants in this table are divided into groups by group_id, so all 
constants in group "CZECH_REGIONS" have the same group_id. 
The group_id is then assigned to specified field on field setting 
page (se_inputform.php3).</p>

<p>Each constant has two important field - name and value. Name 
should be used in input form for displaying the constant (in select 
box, ...). The value is the string, which is then stored in database 
as item (table content).</p>

<p>The class_id field is used just by categories and not other 
constants. There is stored identifier of parent - APC wide - 
categories.</p>

<p>The Pri field is for prioritize the constants in each group (for sorting in
select box ...)</p>
<br>

<a name="category"></a>
<h3>What is the parent category?</h3>

<p>The APC AA has a Two Layer category system:

<p>1) One set of broad categories set at the network level<br>

These are useful so that people can 'browse' and find the information they
are looking for without a specialized understanding of the content area.

<p>2) Totally flexible page-specific categories<br>
 
<p>Individual page owners can setup any specialized categories that work for
them.  They 'map' their specialized categories to the APC-wide parent
categories.
 
<p>We also want to be able to map between different languages, so
categories can be displayed in the local language, but stored as a
universal constant.
<br>

<a name="search"></a>
<h3>How to setup searchform?</h3>
<p>In current AA version 1.8 it is possible to create searchform manualy in HTML. There is no possibility to create it automaticaly as it is known from AA v1.2., yet</p>
<p>Form example:</p>
<pre><code>
&lt;form action="index.shtml" method="get" name="sf" id="sf"&gt;

Search Author: 
 &lt;input type="text" name="conds[0][created_by......]"&gt;&lt;br&gt;

Search in Headline and Fulltext:
 &lt;input type="text" name="conds[1][value]"&gt;
 &lt;input type="hidden" name="conds[1][operator]" value="LIKE"&gt;
 &lt;input type="hidden" name="conds[1][headline........]" value="1"&gt;
 &lt;input type="hidden" name="conds[1][full_text.......]" value="1"&gt;&lt;br&gt;

 &lt;input type="hidden" name="sort[0][headline........]" value="a"&gt;

 &lt;input type="submit" value="Search" &gt;
&lt;/form&gt;
</code></pre>

<p>Let's notice:
<ul>
 <li>The <b>action</b> atribute on first row points to some file, where slice.php3 script is included (by SSI)</li>
 <li>There are two search fields - each of them uses a bit different syntax.<br>First field defines first search condition - conds[0]. The last index is field_id of searched field. Such syntax is easy and is good, if you want to
 <ul>
  <li>search only in one field for that specified phrase<br></li>
  <li>use standard searching operator, which is 'LIKE' (it means, that if the phrase is "los" the search function finds items with field content "los", "Carlos" or "lost"</li>
 </ul><br>
Second field defines the second search condition. Between each condition is allways AND operator - selected item must allways pass each specified condition.<br>
There is used extended syntax in second condition. In extended sytnax we allways use as last index to conds[]<br>
- <b>value</b> atribut, where search phrase is specified (conds[0][value]="Prague")<br>
- <b>operator</b> atribut, where operator for that condition is specified. If <b>operator</b> is not specified, 'LIKE' is used as default. The posibilities are:<ul>
<li>= - equal</li>
<li>&lt;&gt; - not equal</li>
<li>&lt; - less than</li>
<li>&gt; - more than</li>
<li>&lt;= - less or equal</li>
<li>&gt;= - more or equal</li>
<li>LIKE - substring search (SQL: LIKE '%phrase%')</li>
<li>RLIKE - substring which begins with phrase (SQL: LIKE 'phrase%')</li>
<li>LLIKE - substring which ends with phrase (SQL: LIKE '%phrase')</li>
<li>XLIKE - string (SQL: LIKE 'phrase')</li>
</ul><br>
- <b>&lt;field_id&gt;</b> atributes, where are specified ids of fields, where to search (note, that there can be specified more than one field. The value for those atributes are allways 1 - as shown in example)<br>
</li>
<li>It is possible to specify search order of found items. For this purpose is there sort[] variable, where the last index specifies the id of field we wont sort listing by. The value can by either<br>
- <b>a</b> - for ascending order (default)<br>
- <b>d</b> - for descending order<br>
If no sort[] variable is defined, items are sorted by <i>Publish date</i> - descending<br>
As we can see, there is possibilty to specify more than one sort field. In this case the items are sorted primarily by sort[0] field, secondary by sort[1] field ...</li>
</ul>
</p>

<p>Date values are passed in UNIX timestamp (no of seconds since 1.1.1970)</p>
<p>You can see the example on <a href="http://www.apc.org/actionapps/english/demo/search.shtml">APC Demo Site</a>, where publish date field is used too.</p>

<br>

<a name="alias"></a>
<h3>What is the Prameters in Alias Function definition</h3>
<p>When we setting up aliases for database field on se_fields.php3 page, we sometimes need to change the behavior of alias in som way or we need to pass some parameter for alias handling function such as f_f. The Parameters field is the right place, how to do it. The list of parameters for each alias function follows.<br>
In some cases we need to pass more than one parameter to alias function. In such case the aliases are separated by colon character. If we need to use colon inside parameter, we just use #: string instead of : character.<br>
</p>
<table align=center cellpadding=3 border=0>
<tr><td class=tabtit>Function</td><td class=tabtit>Parameter</td><td class=tabtit>Description</td></tr>
<tr><td valign=top class=tabfnc>f_0</td><td clospan=2>null function (nothing shown)</td></tr>
<tr><td>&nbsp;</td><td> none </td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_h</td><td clospan=2>print field content due to html flag set (escape html special characters or just print)</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>delimeter</td><td>if <i>delimeter</i> parameter is specified, the field with multiple values are displayed as list, delited by <i>delimeter</i></td></tr>

<tr><td valign=top class=tabfnc>f_d</td><td clospan=2>prints date in user defined format</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>format</td><td>format string just like in PHP (like "m-d-Y") - see <a href="http://php.net/date">PHP manual</a></td></tr>

<tr><td valign=top class=tabfnc>f_i</td><td clospan=2>prints image scr (&lt;img src=...) - NO_PICTURE for none (the functionality of this alias function can be created as conditional f_c function as well)</td></tr>
<tr><td valign=top class=tabfnc>&nbsp;</td><td>none</td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_n</td><td clospan=2>unpacked id</td></tr>
<tr><td>&nbsp;</td><td>none</td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_g</td><td clospan=2>prints image height atribut (img height=...) or clears it (the functionality of this alias function can be created as conditional f_c function as well)</td></tr>
<tr><td>&nbsp;</td><td>none</td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_w</td><td clospan=2>prints image width atribut (&lt;img width=...) or clears it</td></tr>
<tr><td>&nbsp;</td><td>none</td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_a</td><td clospan=2>prints abstract or grabed fulltext text field</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>length</td><td>length - number of characters taken from field_id (like "80:full_text.......")</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>field_id</td><td>id of fulltex field</td></tr>

<tr><td valign=top class=tabfnc>f_f</td><td clospan=2>prints link to fulltext (hedline url)</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>link_only</td><td>field id (like "link_only.......") where switch between external and internal item is stored</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>redirect</td><td>url of another page which shows the content of item (like "link_only.......:http#://www.ecn.cz/articles/solar.shtml") (note the #: in previous example!)<br>
this page should contain SSI include ../slice.php3 of course</td></tr>

<tr><td valign=top class=tabfnc>f_b</td><td clospan=2>prints text with link to fulltext - more general version of f_f function<br>param: link_only:url_field:redirect:txt:condition_fld (hedline url)</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>link_only</td><td>field id (like "link_only.......") where switch between external and internal item is stored</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>url_field</td><td>field id of external url for link_only<br>
(like hl_href.........)</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>redirect</td><td>url of another page which shows the content of item (like "link_only.......:http#://www.ecn.cz/articles/solar.shtml") (note the #: in previous example!)<br>
this page should contain SSI include ../slice.php3 of course</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>txt</td><td>if txt is field_id content is shown as link, else txt</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>condition_fld</td><td>field id - if no content of this field, no link</td></tr>

<tr><td valign=top class=tabfnc>f_t</td><td clospan=2>converts text to html or escape html (due to html flag)</td></tr>
<tr><td>&nbsp;</td><td>none</td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_s</td><td clospan=2>print database field or default value if empty (the functionality of this alias function can be created as conditional f_c function as well)</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>default</td><td>default value (like "javascript: window.alert('No source url specified')")</td></tr>

<tr><td valign=top class=tabfnc>f_l</td><td clospan=2>prints field as link, if field_id in $param is defined, else prints just field</td></tr>
<tr><td valign=top class=tabfnc>&nbsp;</td><td class=tabparam>field_id</td><td>field_id of possible link (like "source_href.....")</td></tr>


<tr><td valign=top class=tabfnc>f_e</td><td clospan=2>_#ITEMEDIT used on admin page index.php3 for itemedit url</td></tr>
<tr><td>&nbsp;</td><td>none</td><td>&nbsp;</td></tr>

<tr><td valign=top class=tabfnc>f_c</td><td clospan=2>prints "begin".field."end" if field="condition", else prints "none"<br>
if no cond_col specified - this $col is used<br>
condition can be reversed (negated) by "!" character at the begin of condition<br>
param: condition:begin:end:none:cond_col</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>condition</td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>begin</td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>end</td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>none</td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td class=tabparam>cond_col</td><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td colspan=2><I>Example:</I> 1:Yes&lt;!--:--&gt;:No<br>
This example is usable for example for Highlight field - it shows Yes or No depending on highlight field</td></tr>
<tr><td>&nbsp;</td><td colspan=2><I>Example:</I> !:Email#:::<br>
If e-mail field is filled, it shows "Email: email@apc.org" (for example), but if it is not filled, it shows nothing</td></tr>
</table>
<br>

<a name="javascript"></a>
<h3>What does it means the "JavaScript item exchange" View?</h3>
<p>Javascript item echchange View is just name of type of View. It works exactly as standard view, but primary ussage for that type is to show items on any page around the Internet. On destination page should contain HTML tag like:
</p>
<code>
&lt;SCRIPT LANGUAGE="JavaScript" SRC="http://aa.ecn.cz/apc-aa/view.php3?vid=1"&gt;&lt;/SCRIPT&gt;
</code>

<p>This tag includes the output of view to any page on Internet (there is no restriction to one serever).</p>

<p>Because such tag requires javascript as output of view.php3, the format strings for the view (Admin -&gt; View) should look like:</p>

<b>Top HTML</b>:<br>

document.write("&lt;TABLE WIDTH='100%' BORDER='0' CELLPADDING='2' BGCOLOR='#FFFFFF'&gt;")<br><br>

<b>Odd Rows</b>:<br>
document.write("&lt;TR&gt;&lt;TD VALIGN='TOP'&gt;_#PUB_DATE&lt;/TD&gt;&lt;TD&gt;&lt;a href='_#HDLN_URL'&gt;_#HEADLINE&lt;/a&gt;&lt;/TD&gt;&lt;/TR&gt;")<br><br>

<b>Bottom HTML</b>:<br>
document.write("&lt;/TABLE&gt;")<br>

<p>You can see the example on <a href="http://www.apc.org/actionapps/english/demo/jsexchange.html">APC Demo Site</a></p>


<a name="sliceparam"></a>
<h3>Which parameters can I use with slice.php3</h3>
<table align=center cellpadding=3 border=0>
<tr><td class=tabtit>Parameter</td><td class=tabtit>Reqiured</td><td class=tabtit>Description</td></tr>
<tr><td valign=top class=tabfnc>slice_id</td><td>Yes</td><td>id of displayed slice</td></tr>
<tr><td valign=top class=tabfnc>restrict</td><td>No</td><td>field id used with "res_val" and "exact" for restricted output (display only items with "restrict" field = "res_val"<br><i>Example:</i>restrict=category........&amp;res_val=Environment&amp;exact=1</td></tr>
<tr><td valign=top class=tabfnc>res_val</td><td>No</td><td>see <i>restrict</i></td></tr>
<tr><td valign=top class=tabfnc>exact</td><td>No</td><td>if set, <i>restrict</i> field must match <i>res_val</i> exactly (=) otherwise substring is sufficient (LIKE '%res_val%')</td></tr>
<tr><td valign=top class=tabfnc>highlight</td><td>No</td><td>when true, shows only highlighted items in compact view<br><i>Example:</i> highlight=1</td></tr>
<tr><td valign=top class=tabfnc>order</td><td>No</td><td>order field id - if other than publish date add minus sign for descending order<br><i>Example:</i> order=headline........-</td></tr>
<tr><td valign=top class=tabfnc>timeorder</td><td>No</td><td>if <i>rev</i> - reverse publish date order (less priority than "order")<br><i>Example:</i> timeorder=rev</td></tr>
<tr><td valign=top class=tabfnc>inc</td><td>No</td><td>for dispalying another file instead of slice data (for example some static html file)<br><i>Example:</i> inc=/contact.html</td></tr>
<tr><td valign=top class=tabfnc>listlen</td><td>No</td><td>change number of listed items in compact view (aplicable in compact viewe only)<br><i>Example:</i> listlen=10</td></tr>
<tr><td valign=top class=tabfnc>no_scr</td><td>No</td><td>if true, no page scroller is displayed<br><i>Example:</i> no_scr=1</td></tr>
<tr><td valign=top class=tabfnc>scr_go</td><td>No</td><td>sets page scroller to specified page<br><i>Example:</i> scr_go=2</td></tr>
<tr><td valign=top class=tabfnc>encap</td><td>Yes for not encapsulated</td><td>determines wheather this file is SSI included to .shtml file (&lt;--#include virtual="... ) or called directly as slice.php3<br><i>Example:</i>encap=false</td></tr>
<tr><td valign=top class=tabfnc>sh_itm</td><td>No</td><td>id of item to show - if specified, selected item is shown in full text<br><i>Example:</i> index.shtml?sh_itm=01ac1b10fae13c0a61c5292ba72d70b1</td></tr>
<tr><td valign=top class=tabfnc>x</td><td>No</td><td>the same as sh_itm, but short_id is used instead (implemented for shorter item url (see _#SITEM_ID alias))</td></tr>
<tr><td valign=top class=tabfnc>srch</td><td>No</td><td>true if this script have to show search results</td></tr>
<tr><td valign=top class=tabfnc>cat_id</td><td>No</td><td>select only items in category with id cat_id<br>Deprecated - better to use <i>restrict</i> and <i>res_val</i> parameters</td></tr>
<tr><td valign=top class=tabfnc>cat_name</td><td>No</td><td>select only items in category with name <i>cat_name</i> as substring<br>Deprecated - better to use <i>restrict</i> and <i>res_val</i> parameters</td></tr>
<tr><td valign=top class=tabfnc>items[id]</td><td>No</td><td>array of items to show one after one as fulltext (<i>ids</i> are the long ones - see sh_itm)</td></tr>
</table>


<br>
<a name=""></a>
<h3></h3>


<br>
<a name=""></a>
<h3></h3>

<br><br>
<a href="index.html">Other documentation</a><br>

</body>
</html>
