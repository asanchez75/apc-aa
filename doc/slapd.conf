# $Id$
#
# This is an OpenLDAP configuration file example which came with the
# APC action applications package. If you install the OpenLDAP server
# for the action applications, put this file to /etc/openldap/slapd.conf
# (on some non-rpm based installations this might be /etc/slapd.conf)
# and edit it according to the comments below. Remember to also put these
# files into the /etc/openldap directory:
# 	slapd.at.netscape.conf
# 	slapd.at.apc.conf
# 	slapd.oc.netscape.conf
# 	slapd.oc.apc.conf
#
# This file was derived from the original slapd.conf file which comes with
# the OpenLDAP package.
#
# See slapd.conf(5) for details on configuration options.
# This file should NOT be world readable.
#

# The include directives include the configuration information from the
# specified files. .at. files contain attributes, .oc. files contain
# object class definitions. While the .at.conf and .oc.conf files contain
# standard information which comes with the OpenLDAP server, the 
# *netscape* files provide data strucutres for database access by netscape
# communicator and the *apc* files provide the data structures required by
# apc action applications.
include		/etc/openldap/slapd.at.conf
include		/etc/openldap/slapd.at.netscape.conf
include		/etc/openldap/slapd.at.apc.conf
include		/etc/openldap/slapd.oc.conf
include		/etc/openldap/slapd.oc.netscape.conf
include		/etc/openldap/slapd.oc.apc.conf

# This tells OpenLDAP to force the data to be consistent to a certain 
# degree. Don't turn it off if you don't have a good reason.
schemacheck	on

# This, if not commented out, tells the server to forward searches in
# name spaces outside our base dn to this LDAP server. Unless you want to
# provide a global LDAP directory, this should be commented out.
#referral	ldap://ldap.itd.umich.edu

# These files are used by the ldap server to store its process id and
# arguments.
pidfile		/var/run/slapd.pid
argsfile	/var/run/slapd.args

# Access control
# ACL's match on a first seen, first match!
#
# Examples:
# access to attr=mail
#	by group="cn=Test,dc=ecn,dc=apc,dc=org" write
# access to dn="ou=Manon,o=(.*),c=(.*)"
#               attrs=children,entry,uid
#               by  group="cn=Managers,o=$1,c=$2" write
#               by  dn=".*" read
#
# access to attr=userpassword 
#	by self write
#	by * none
#

# We want to provide access to the database to nobody but us:
defaultaccess none

# substitute the dn in the following 'by...' line with your own!
# keep the "aalduser", only change the dc= values
# This allows the user to change her password:
access to attr=userpassword 
        by dn="cn=aalduser,dc=ecn,dc=apc,dc=org" write
	by self write
	by * none

# do the same again here.
# This allows general write access to the aalduser and general
# read access to anyone else.
access to *
        by dn="cn=aalduser,dc=ecn,dc=apc,dc=org" write
        by * read

# No anonymous access + authenticated: read only
# access to *
#        by dn=".+" read
#        by * none

#######################################################################
# ldbm database definitions
#######################################################################

### Database 1 ###

database	ldbm
# replace your base dn again here:
suffix		"dc=ecn,dc=apc,dc=org"
# and again here:
directory	/var/lib/ldap/ecn.apc.org
# and a final time here:
rootdn		"cn=root,dc=ecn,dc=apc,dc=org"
# cleartext passwords, especially for the rootdn, should
# be avoid.  See slapd.conf(5) for details.
# Change this password to something else - or even better, leave it
# and set an encrypted one (see apc aa installation guide):
rootpw		password
#rootpw		{md5}dZq5o7UytRJtZjviv9+UdQ==
#sizelimit       10000
index           uid
index           objectclass  pres,eq
index           default none

#replica		host=ecn3.ecn.cz binddn="cn=replicator,dc=ecn,dc=apc,dc=org" bindmethod=simple credentials=password
#replogfile	/var/ldap/ecn.apc.org/replog

### Database 2 ###

#database	ldbm
#suffix		"dc=ecn,dc=cz"
#directory	/var/ldap/ecn.cz
#rootdn		"cn=root,dc=ecn,dc=cz"
#rootpw		{md5}dZqIJFTyoiJtZjviv9+UdQ==
##sizelimit       10000

### Database 3 ###

#database        ldbm
#suffix          "dc=igc,dc=apc,dc=org"
#directory       /var/ldap/igc.apc.org
#rootdn          "cn=root,dc=igc,dc=apc,dc=org"
##rootpw          yourpassword
#rootpw		{sha}ELtfnofe/yBLJqC2SOZT/iP+AOs=
#sizelimit       10000


